<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>sound-manager test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../dist/bundle.js"></script>
  </head>

  <body>
    <button class="clicky">clicky</button>

    <script>
    const context = new AudioContext();
    const manager = new soundManager.Manager({ context, });
    const clicky = document.querySelector('.clicky');

    const getAnimalTest = () => Promise.all([
      manager.addSound(
        'test1',
        {
          url: 'http://www.noiseaddicts.com/samples_1w72b820/280.mp3',
        },
      ),

      manager.addSound(
        'test2',
        {
          url: 'http://www.noiseaddicts.com/samples_1w72b820/271.mp3',
        },
      ),

      manager.addSound(
        'test3',
        {
          url: 'http://www.noiseaddicts.com/samples_1w72b820/272.mp3',
        },
      ),
    ]);

    const getNoiseTest = () => Promise.all([
      manager.addSound(
        'test1',
        {
          url: 'http://cdn.mos.musicradar.com/audio/samples/noise-crackle-demos/Tape_Noise_04.mp3',
        },
      ),

      manager.addSound(
        'test2',
        {
          url: 'http://cdn.mos.musicradar.com/audio/samples/noise-crackle-demos/Crackle_Loop_05.mp3',
        },
      ),
    ]);

    const getMusicTest = () => Promise.all([
      manager.addSound(
        'test1',
        {
          url: 'http://www.hochmuth.com/mp3/Beethoven_12_Variation.mp3',
        },
      ),
    ]);

    getMusicTest().then((sounds) => {
      manager.addPlaylist('testPlaylist', {
        ids: [
          'test1',
          //'test2',
          //'test3',
        ],

        fade: {
          length: 10,
          curve: 'equalPower',
        },

        callback(events) {
          console.log(events);
        },
      });

      manager.updatePanelRegistration(sounds[0], true);
      document.body.appendChild(manager.generateAudioPanelElement());
      clicky.addEventListener('click', () => {
        manager.playPlaylist('testPlaylist').then((e) => {
          console.log(e);
        }, (err) => {
          console.log(err);
        });
      });
    });
    </script>
  </body>
</html>